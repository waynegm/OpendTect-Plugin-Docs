<!DOCTYPE html>
<html>
  <head>
    <title>ExternalAttrib - External Attribute</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-M5LCZ54');</script>
    <!-- End Google Tag Manager -->
    <!-- Bootstrap -->
    <link href="//netdna.bootstrapcdn.com/bootswatch/3.3.6/flatly/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- mathjax for asciimath -->
   
    <link href="/OpendTect-Plugin-Docs/css/site.css" rel="stylesheet" media="screen">
    <link href="/OpendTect-Plugin-Docs/css/syntax.css" rel="stylesheet" media="screen">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62607269-1', 'auto');
  ga('send', 'pageview');

</script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
    </script>
   <link rel="stylesheet" href="https://cdn.knightlab.com/libs/juxtapose/latest/css/juxtapose.css">
  </head>

  <body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M5LCZ54"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/OpendTect-Plugin-Docs/">OpendTect Plugins</a>
        </div>
        <div class="navbar-collapse collapse">

          <ul class="nav navbar-nav navbar-left">
            <li class="dropdown">
              <a href="/OpendTect-Plugin-Docs/installation/" class="dropdown-toggle" data-toggle="dropdown">Installation <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/OpendTect-Plugin-Docs/installation/download-binary.html">Download Binary Distribution</a></li>
                <li><a href="/OpendTect-Plugin-Docs/installation/installation.html">Installation</a></li>
                <li><a href="/OpendTect-Plugin-Docs/installation/building-from-source.html">Building from Source</a></li>
                <li><a href="/OpendTect-Plugin-Docs/installation/faq.html">Frequently Asked Questions</a></li>
              </ul>
            </li>
            <li class="active" class="dropdown">
              <a href="/OpendTect-Plugin-Docs/plugins/" class="dropdown-toggle" data-toggle="dropdown">Plugins <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/OpendTect-Plugin-Docs/plugins/AVOAttrib.html">AVOAttrib - AVO Attributes</a></li>
                <li><a href="/OpendTect-Plugin-Docs/plugins/AVOPolarAttrib.html">AVOPolarAttrib - AVO Polarization Attributes</a></li>
                <li><a href="/OpendTect-Plugin-Docs/plugins/ExternalAttrib.html">ExternalAttrib - External Attribute</a></li>
                <li><a href="/OpendTect-Plugin-Docs/plugins/GradientAttrib.html">GradientAttrib - Gradients</a></li>
                <li><a href="/OpendTect-Plugin-Docs/plugins/LTFAttrib.html">LTFAttrib - Spectral Decomposition by Local Attributes</a></li>
                <li><a href="/OpendTect-Plugin-Docs/plugins/MLVFilter.html">MLVFilterAttrib - Mean of Least Variance Filter</a></li>
                <li><a href="/OpendTect-Plugin-Docs/plugins/RSpecAttrib.html">RSpecAttrib - Recursive Spectral Decomposition</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="/OpendTect-Plugin-Docs/external_attributes/" class="dropdown-toggle" data-toggle="dropdown">External Attributes <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/OpendTect-Plugin-Docs/external_attributes/AVO_IG.html">AVO Intercept and Gradient</a></li>
                <li><a href="/OpendTect-Plugin-Docs/external_attributes/Add_Noise.html">Add Noise</a></li>
                <li><a href="/OpendTect-Plugin-Docs/external_attributes/DipandAzimuth.html">Dip and Azimuth</a></li>
                <li><a href="/OpendTect-Plugin-Docs/external_attributes/LPA_Smooth.html">LPA Smoothing</a></li>
                <li><a href="/OpendTect-Plugin-Docs/external_attributes/Spatial_Filter_Circular.html">Spatial Filter - Circular</a></li>
                <li><a href="/OpendTect-Plugin-Docs/external_attributes/Spatial_Filter_Rectangular.html">Spatial Filter - Rectangular</a></li>
                <li><a href="/OpendTect-Plugin-Docs/external_attributes/Z_Delay_Est.html">Time Delay Estimation</a></li>
                <li><a href="/OpendTect-Plugin-Docs/external_attributes/Vector_Filters.html">Vector Filter</a></li>
                <li><a href="/OpendTect-Plugin-Docs/external_attributes/ZC_Block.html">ZC Block</a></li>
              </ul>
            </li>
            <li><a href="/OpendTect-Plugin-Docs/articles/">Articles</a></li>
          </ul>

          <form class="navbar-form navbar-left" action="/search.html" role="search">
            <div class="form-group">
              <input type="text" required name="q" id="tipue_search_input" class="form-control" placeholder="Search"> 
            </div>
          </form>

          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/waynegm/OpendTect-Plugins"><i class="fa fa-github fa-lg" title="OpendTect Plugins on Github"></i></a></li>
            <li><a href="https://www.linkedin.com/in/waynemogg"><i class="fa fa-linkedin fa-lg" title="My LinkedIn"></i></a></li>
          </ul>

        </div><!--/.nav-collapse -->
      </div>
    </div>


<div class="container-fluid">

  <ol class="breadcrumb">
    <li><a href="/OpendTect-Plugin-Docs/">Home</a></li>
      <li><a href="/OpendTect-Plugin-Docs/plugins/">Plugins</a></li>
      <li class="active">ExternalAttrib - External Attribute</li>
  </ol>

  <div class="page-header">
    <h1>ExternalAttrib - External Attribute</h1>
  </div>

  <div class="row">

    <div class="col-md-9 content" role="main">
    <main>
      <p>This attribute plugin for the open source seismic interpretation platform <a href="https://opendtect.org" title="OpendTect">OpendTect</a> allows attributes to be developed in a scripting language like Python.</p>
<h3 id="description">Description</h3>
<p>With this plugin it is possible to calculate single and multitrace attributes outside of OpendTect using a user specified external application. The plugin supports multi-trace multi-attribute input and multi-attribute output as well as parallel execution.</p>
<p><strong>NOTE:</strong> <em>Releases prior to 6.0.2 allowed multi-trace multi-attribute input only if all the attributes were in the same multi-attribute volume. In releases from 6.0.2 onward this limitation has been removed.</em></p>
<p>Instead of doing the attribute calculation within OpendTect this plugin starts up a user specified external application and then reads and writes the trace data to/from the external application's stdin and stdout. The external application could be written in any programming language, compiled or interpreted, provided it has the <a href="/OpendTect-Plugin-Docs/plugins/ExternalAttrib.html#structure-of-a-conforming-application" title="ExternalAttrib - External Attribute">Structure of a Conforming Application</a>. This essentially means you can write a new OpendTect attribute in your computer language of choice and not have to delve into the internals of OpendTect.</p>
<p>A reference implementation for writing external attributes in Python/Numpy (version 3) is available. This consists of a module <em>extattrib.py</em> that handles the stdin/stdout details and presents the trace data as a numpy array. Guides and Tips and Tricks to assist can be found in various <a href="/OpendTect-Plugin-Docs/articles/" title="Articles">Articles</a></p>
<p>There are <a href="https://github.com/waynegm/OpendTect-External-Attributes" title="external attribute scripts">external attribute scripts</a> for everything from dip estimation to filtering described in the <a href="/OpendTect-Plugin-Docs/external_attributes/" title="External Attributes">External Attributes</a> section of this documentation.</p>
<h3 id="input-parameters">Input Parameters</h3>
<p>This attribute has 3 required parameters and up to 9 optional parameters determined by the <a href="/OpendTect-Plugin-Docs/plugins/ExternalAttrib.html#json-parameter-string" title="ExternalAttrib - External Attribute">JSON Parameter String</a> provided by the external attribute script:</p>
<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">NAME</th>
            <th class="col-xs-8">DESCRIPTION</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Interpreter</td>
            <td>For external attributes written in a scripted language this field specifies the location of the  interpreter required to run the script, eg /usr/bin/python3</td>
        </tr>
        <tr>
            <td>External File</td>
            <td>The external application to be used for attribute calculation.</td>
        </tr>
        <tr>
            <td>Input</td>
            <td>The input attribute to use</td>
        </tr>
    </tbody>
</table>

<figure>
  <br/>
  <img src="images/ExternalAttrib_input.jpg" class="img-responsive center-block" alt="External Attribute Plugin input parameters">
  <figcaption class="text-center">External Attribute Plugin input parameters</figcaption>
  <br/>
</figure>

<h3 id="cross-platform-setup">Cross Platform Setup</h3>
<p>Prior to release 5.10 and 6.0.0pre7-1 any attribute set containing external attributes could not be shared between Windows and Linux because the Interpeter and External File input fields contain platform specific file paths.</p>
<p>Release 5.10 and 6.0.0pre7-1 introduced an optional mechanism to support cross platform attribute sets containing external attributes by using environment variables. Consider the following script for starting OpendTect on Linux:</p>
<div class="codehilite"><pre><span></span>#!/bin/csh -f
setenv DTECT_SETTINGS &quot;$HOME/.od6&quot;
setenv OD_USER_PLUGIN_DIR &quot;$HOME/.od6&quot;
setenv EX_PYTHON &quot;/opt/anaconda3/bin/python&quot;
setenv OD_EX_DIR &quot;$HOME/Development/GIT_AREA/OpendTect-External-Attributes/&quot;
/opt/seismic/OpendTect_6/6.0.0/start_dtect 
</pre></div>


<p>And an equivalent Windows command file:</p>
<div class="codehilite"><pre><span></span>@set OD_USER_PLUGIN_DIR=%HOMEPATH%\od6
@set EX_PYTHON=C:\Miniconda3\python.exe
@set OD_EX_DIR=E:\Development\GIT_AREA\OpendTect-External-Attributes\
start &quot;&quot; &quot;C:\Program Files\OpendTect_6\6.0.0\bin\win64\Release\od_start_dtect.exe&quot;
</pre></div>


<p>The environment variable EX_PYTHON points to the python interpreter for each platform and entering %EX_PYTHON% into the Interpreter input field ensures the platform appropriate interpreter is used. Any name can be used for the environment variable.</p>
<p>The  environment variable OD_EX_DIR points to a root folder below which the attribute script files can be found. The setting in the Linux startup script points to a Linux folder. The corresponding setting in the Windows command file points to the same location via a network share. This environment variable name is hard wired into the code so this variable name cannot be changed. Note that the script files cam be located in subfolders of the OD_EX_DIR folder.</p>
<p>This type of setup produces attribute set descriptions like this:</p>
<div class="codehilite"><pre><span></span>7.Definition: ExternalAttrib interpfile=%EX_PYTHON% exfile=%OD_EX_DIR%tests/ex_ui_test_all.py zmargin=[-1,1] stepout=1,1 selection=2 par0=0 par1=1 par2=2 par3=3 par4=4 par5=5 output=0
</pre></div>


<p>which can be used on either platform without change.</p>
<p>Attribute sets created by release 5.0.10 and 6.0.0pre7-1 and later that use these environment variables will not work in earlier versions of the External Attribute plugin.</p>
<h3 id="json-parameter-string">JSON Parameter String</h3>
<p>The external application can specify a set of parameters as a JSON object string. The following keywords are supported:</p>
<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">JSON KEYWORD</th>
            <th class="col-xs-8">Input (depreciated)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>TYPE</b></td>
            <td>String</td>
        </tr>
        <tr>
            <td><b>DESCRIPTION</b></td>
            <td>Specifies a label to appear beside the input attribute selection UI element. </br>Superceded by the "Inputs" keyword but is supported for backward compatibility.</td>
        </tr>
        <tr>
            <td><b>EXAMPLE</b></td>
            <td>'Input': 'Input Data'</td>
        </tr>
    </tbody>
</table>

<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">JSON KEYWORD</th>
            <th class="col-xs-8">Inputs</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>TYPE</b></td>
            <td>Array of Strings</td>
        </tr>
        <tr>
            <td><b>DESCRIPTION</b></td>
            <td>Each string is used as a label for an input attribute selection UI element.</br> Currently limited to a maximum of 6 attribute inputs.</td>
        </tr>
        <tr>
            <td><b>EXAMPLE</b></td>
            <td>'Inputs': ['Input 1','Input 2','Input 3']</td>
        </tr>
    </tbody>
</table>

<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">JSON KEYWORD</th>
            <th class="col-xs-8">Output (optional)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>TYPE</b></td>
            <td>Array of Strings</td>
        </tr>
        <tr>
            <td><b>DESCRIPTION</b></td>
            <td>Each string specifies the name of an output attribute.</br>If this keyword is not supplied a single output attribute is assumed.</td>
        </tr>
        <tr>
            <td><b>EXAMPLE</b></td>
            <td>'Output': ['Out 1','Out 2','Out 3']</td>
        </tr>
    </tbody>
</table>

<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">JSON KEYWORD</th>
            <th class="col-xs-8">ZSampMargin (optional)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>TYPE</b></td>
            <td>Object with a 'Value' (array of 2 numbers)  and optional 'Hidden' (boolean) and 'Symmetric' (boolean) parameters.</td>
        </tr>
        <tr>
            <td><b>DESCRIPTION</b></td>
            <td>The 'Value' parameter is an array of 2 numbers specifing the desired minimum number of samples before and after the calculation point required for the calculation respectively. If not supplied only a single value will be provided when the attribute is computed on a timeslice or horizon.</br>The optional 'Hidden' parameter is a boolean which if set to true makes the ZSampMargin parameter read only.</br>The optional 'Symmetric' parameter is a boolean which if true causes only a single entry to be displayed in the UI.</br>The optional 'Minimum' parameter is an array of 2 numbers specifying a minimum required window size</td>
        </tr>
        <tr>
            <td><b>EXAMPLE</b></td>
            <td>'ZSampMargin': {'Value': [-2,2]} </br>'ZSampMargin': {'Value': [-2,2], 'Symmetric': True}</td>
        </tr>
    </tbody>
</table>

<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">JSON KEYWORD</th>
            <th class="col-xs-8">StepOut (optional)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>TYPE</b></td>
            <td>Object with a 'Value' (array of 2 numbers)  and optional 'Hidden' (boolean) parameters.</td>
        </tr>
        <tr>
            <td><b>DESCRIPTION</b></td>
            <td>The 'Value' parameter is an array of 2 numbers specifing the inline and crossline stepout defining the block of traces to be used around the current calculation position. If not supplied only a single trace is provided.</br>The optional 'Hidden' parameter is a boolean which if set to true makes the StepOut parameter read only.</br>The optional 'Minimum' parameter is an array of 2 numbers specifying a minimum required stepout.</td>
        </tr>
        <tr>
            <td><b>EXAMPLE</b></td>
            <td>'StepOut': {'Value': [2,2]} </br>'StepOut': {'Value': [2,2], 'Hidden': True}</td>
        </tr>
    </tbody>
</table>

<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">JSON KEYWORD</th>
            <th class="col-xs-8">Select (optional)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>TYPE</b></td>
            <td>Object with a 'Name' (string), 'Values' (array of strings) and 'Select' (number) parameters.</td>
        </tr>
        <tr>
            <td><b>DESCRIPTION</b></td>
            <td>Displays a list box labeled 'Name' with options specified in 'Values' and default selection being item number 'Select'.</td>
        </tr>
        <tr>
            <td><b>EXAMPLE</b></td>
            <td>'Select': {'Name': 'Type', 'Values': ['None', 'Median', 'Average'], 'Selection': 0}</td>
        </tr>
    </tbody>
</table>

<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">JSON KEYWORD</th>
            <th class="col-xs-8">Par_0, Par_1, Par_2, Par_3, Par_4, Par_5 (all optional)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>TYPE</b></td>
            <td>Object with a 'Name' (string) and 'Value' (number) parameter.</td>
        </tr>
        <tr>
            <td><b>DESCRIPTION</b></td>
            <td>Displays an entry box labeled 'Name' with default value 'Value'.</td>
        </tr>
        <tr>
            <td><b>EXAMPLE</b></td>
            <td>'Par_0' : {'Name': 'First Parameter', 'Value' : 100.0}</br>'Par_1' : {'Name': 'Second Parameter', 'Value' : 200.0}</td>
        </tr>
    </tbody>
</table>

<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">JSON KEYWORD</th>
            <th class="col-xs-8">Help (optional)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>TYPE</b></td>
            <td>String</td>
        </tr>
        <tr>
            <td><b>DESCRIPTION</b></td>
            <td>URL pointing to documentation for the external attribute.</br> Causes an icon help button to be displayed in the UI.</td>
        </tr>
        <tr>
            <td><b>EXAMPLE</b></td>
            <td>'Help'  : 'http://waynegm.github.io/OpendTect-Plugin-Docs/External-Attributes/LPA-Attributes/'</td>
        </tr>
    </tbody>
</table>

<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-4">JSON KEYWORD</th>
            <th class="col-xs-8">Parallel (optional)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>TYPE</b></td>
            <td>Boolean </td>
        </tr>
        <tr>
            <td><b>DESCRIPTION</b></td>
            <td>Default is True which allows parallel execution. If set to False then calculations only use a single thread.</td>
        </tr>
        <tr>
            <td><b>EXAMPLE</b></td>
            <td>'Parallel'  : False</td>
        </tr>
    </tbody>
</table>

<p>Here is an example parameter string:</p>
<div class="codehilite"><pre><span></span>{
    &#39;Inputs&#39;: [&#39;Test Input&#39;],
    &#39;Output&#39;: [&#39;Left&#39;, &#39;Right&#39;],
    &#39;ZSampMargin&#39; : {&#39;Value&#39;: [-10,10]},
    &#39;StepOut&#39; : {&#39;Value&#39;: [1,1], &#39;Hidden&#39;: true},
    &#39;Par_0&#39; : {&#39;Name&#39;: &#39;First Parameter&#39;, &#39;Value&#39; : 100.0},
    &#39;Par_1&#39; : {&#39;Name&#39;: &#39;Second Parameter&#39;,&#39;Value&#39;: 200.0},
    &#39;Help&#39;  : &#39;https://gist.github.com/waynegm/84f323ec4aab3961c23d&#39;
}
</pre></div>


<h3 id="issues">Issues</h3>
<h4 id="opendtect-linux-hangs-after-selecting-a-python-external-attribute-in-the-attribute-description-editor">OpendTect (Linux) hangs after selecting a Python external attribute in the Attribute Description Editor</h4>
<p>This can happen if the Python file has Windows/DOS linebreaks. Use the dos2unix command on the Python file and all should be ok.</p>
<h4 id="setting-up-a-pythonnumpyscipy-environment">Setting up a Python/Numpy/Scipy environment</h4>
<p>On both Linux and Windows it can be a bit of a pain to set up a Python/Numpy/Scipy development stack for Python 3 from scratch. Continuum Analytics provide free Python installers for Linux and Windows in <a href="http://continuum.io/downloads#all">Anaconda</a>. There is also a smaller DIY option called <a href="http://conda.pydata.org/miniconda.html">Miniconda</a> which allows you to select just the packages you need (the examples only require Python 3, Numpy and Scipy).</p>
<h3 id="structure-of-a-conforming-application">Structure of a Conforming Application</h3>
<p>The rules that a comforming application must follow are described below and the extattrib.py module included in the plugin distribution provides a reference implementation.</p>
<ul>
<li>When invoked with a commandline argument of <code>-g</code> the application should write out a  <a href="/OpendTect-Plugin-Docs/plugins/ExternalAttrib.html#json-parameter-string" title="ExternalAttrib - External Attribute">JSON Parameter String</a> to stdout describing the attribute parameters and exit.</li>
<li>When invoked with a commandline argument of <code>-c json-parameter-string</code> the application <ul>
<li>should read and parse the contents of <code>json-parameter-string</code> to get the attribute parameters</li>
<li>read a 40 byte block of binary data from stdin called the SeismicInfo block (described below)</li>
<li>start an endless loop that:<ul>
<li>reads a 16 byte block of binary data from stdin called the TraceInfo block (described below)</li>
<li>reads a data block of 4 byte binary floats from stdin that contains the seismic trace data. The size of the data block depends on the content of the SeismicInfo (number of traces and number of inputs) and TraceInfo ( number of samples) blocks<ul>
<li><code>number_of_inputs * number_of_traces * number_of_samples * 4 bytes</code>.</li>
</ul>
</li>
<li>calculates the attribute output</li>
<li>writes a data block of 4 byte binary floats to stdout that contains the attribute output. The size of the output data block depends on the content of the TraceInfo ( number of samples) block and the number of output attributes<ul>
<li><code>number_of_samples * number_of_outputs * 4 bytes</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="seismicinfo-block">SeismicInfo Block</h4>
<p>This block of binary data is written to the applications stdin immediately after it is started with the <code>-c</code> argument. It consists of 40 bytes as follows:</p>
<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-2">SIZE</th>
            <th class="col-xs-2">FORMAT</th>
            <th class="col-xs-2">INDEX</th>
            <th class="col-xs-6">DESCRIPTION</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>4 bytes</td>
            <td>integer</td>
            <td>nrtraces</td>
            <td>number of traces for each input attribute</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>integer</td>
            <td>nrinput</td>
            <td>number of input attributes</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>integer</td>
            <td>nroutput</td>
            <td>number of output atrributes</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>integer</td>
            <td>nrinl</td>
            <td>number of inline traces in the input data block</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>integer</td>
            <td>nrcrl</td>
            <td>number of crossline traces in the input data block</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>float</td>
            <td>zstep</td>
            <td>trace sampling interval  (result of OpendTect API call <em>SI().zstep()</em>)</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>float</td>
            <td>inldist</td>
            <td>distance between inlines (result of OpendTect API call <em>SI().inlDistance()</em.)</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>float</td>
            <td>crldist</td>
            <td>distance between crosslines (result of OpendTect API call <em>SI().crlDistance()</em>)</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>float</td>
            <td>zFactor</td>
            <td>(result of OpendTect API call <em>zFactor()</em>)</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>float</td>
            <td>dipFactor</td>
            <td>(result of OpendTect API call <em>dipFactor()</em>)</td>
        </tr>
    </tbody>
</table>

<h4 id="traceinfo-block">TraceInfo Block</h4>
<p>This block of binary data is written to the application stdin immediately before each block of trace data. It consists of 16 bytes as follows:</p>
<table class="table table-striped table-bordered table-responsive">
    <thead class="bg-primary">
        <tr>
            <th class="col-xs-2">SIZE</th>
            <th class="col-xs-2">FORMAT</th>
            <th class="col-xs-2">INDEX</th>
            <th class="col-xs-6">DESCRIPTION</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>4 bytes</td>
            <td>integer</td>
            <td>nrsamp</td>
            <td>number of samples in each trace within the input data block (OpendTect <em>nrsamples</em> parameter)</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>integer</td>
            <td>z0</td>
            <td>position of first sample in data trace within entire seismic trace ( OpendTect <em>z0</em> parameter)</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>integer</td>
            <td>inl</td>
            <td>inline number of current calculation position</td>
        </tr>
        <tr>
            <td>4 bytes</td>
            <td>integer</td>
            <td>crl</td>
            <td>crossline number of current calculation position</td>
        </tr>
    </tbody>
</table>
    </main>
    <ul class="pager">
      <li class="previous"><a href="/OpendTect-Plugin-Docs/plugins/AVOPolarAttrib.html">&larr; AVOPolarAttrib - AVO Polarization Attributes</a></li>
      <li class="next"><a href="/OpendTect-Plugin-Docs/plugins/GradientAttrib.html">GradientAttrib - Gradients &rarr;</a></li>
    </ul>
    </div>

    <div class="col-md-3" role="complementary">
      <nav class="hidden-print hidden-xs hidden-sm">
        <div class="sidebar" data-spy="affix" data-offset-top="80" data-offset-bottom="60">
          <div class="well">
            <a href="#"><strong>ExternalAttrib - External Attribute</strong></a>
            <div class="toc">
<ul>
<li><a href="#description">Description</a></li>
<li><a href="#input-parameters">Input Parameters</a></li>
<li><a href="#cross-platform-setup">Cross Platform Setup</a></li>
<li><a href="#json-parameter-string">JSON Parameter String</a></li>
<li><a href="#issues">Issues</a><ul>
<li><a href="#opendtect-linux-hangs-after-selecting-a-python-external-attribute-in-the-attribute-description-editor">OpendTect (Linux) hangs after selecting a Python external attribute in the Attribute Description Editor</a></li>
<li><a href="#setting-up-a-pythonnumpyscipy-environment">Setting up a Python/Numpy/Scipy environment</a></li>
</ul>
</li>
<li><a href="#structure-of-a-conforming-application">Structure of a Conforming Application</a><ul>
<li><a href="#seismicinfo-block">SeismicInfo Block</a></li>
<li><a href="#traceinfo-block">TraceInfo Block</a></li>
</ul>
</li>
</ul>
</div>

          </div>
        </div>
      </nav>
    </div>

  </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="footer">
            <hr>
            <p>All content and images &copy; 2015 by Wayne Mogg</p>
            <p>Website powered by <a href="http://urubu.jandecaluwe.com">Urubu</a></p>
        </div>
    </div>
</div>



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- <script src="https://code.jquery.com/jquery.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
 
    <script src="https://cdn.knightlab.com/libs/juxtapose/latest/js/juxtapose.min.js"></script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML">
    </script>
   </body>
</html>
